<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cc.carce.sale.mapper.manager.CarQuestionAnswerMapper">

    <!-- 插入问答 -->
    <insert id="insert" parameterType="cc.carce.sale.entity.CarQuestionAnswerEntity" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO car_question_answer (channelId, question, answer, showOrder, delFlag, createTime)
        VALUES (#{channelId}, #{question}, #{answer}, #{showOrder}, #{delFlag}, #{createTime})
    </insert>

    <!-- 根据ID查询问答 -->
    <select id="selectById" resultType="cc.carce.sale.entity.CarQuestionAnswerEntity">
        SELECT * FROM car_question_answer WHERE id = #{id} AND delFlag = 0
    </select>

    <!-- 根据ID更新问答 -->
    <update id="updateById" parameterType="cc.carce.sale.entity.CarQuestionAnswerEntity">
        UPDATE car_question_answer 
        SET channelId = #{channelId}, 
            question = #{question}, 
            answer = #{answer}, 
            showOrder = #{showOrder}
        WHERE id = #{id}
    </update>

    <!-- 根据ID删除问答（逻辑删除） -->
    <update id="deleteById">
        UPDATE car_question_answer SET delFlag = 1 WHERE id = #{id}
    </update>

    <!-- 根据频道ID查询问答列表 -->
    <select id="selectByChannelId" resultType="cc.carce.sale.entity.CarQuestionAnswerEntity">
        SELECT * FROM car_question_answer 
        WHERE channelId = #{channelId} AND delFlag = 0 
        ORDER BY showOrder ASC, createTime DESC
    </select>

    <!-- 查询所有问答 -->
    <select id="selectAll" resultType="cc.carce.sale.entity.CarQuestionAnswerEntity">
        SELECT * FROM car_question_answer 
        WHERE delFlag = 0 
        ORDER BY showOrder ASC, createTime DESC
    </select>

    <!-- 根据频道ID查询问答列表（按排序） -->
    <select id="selectByChannelIdOrderByShowOrder" resultType="cc.carce.sale.entity.CarQuestionAnswerEntity">
        SELECT * FROM car_question_answer 
        WHERE channelId = #{channelId} AND delFlag = 0 
        ORDER BY showOrder ASC, createTime DESC
    </select>

</mapper>
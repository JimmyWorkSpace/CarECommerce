server:
  port: 8080
  servlet:
    context-path: /
  tomcat:
    uri-encoding: UTF-8
    accept-count: 1000
    threads:
      max: 800
      min-spare: 100
logging:
  level:
    cc.carce.sale: debug
    org.springframework: warn
spring:
  messages:
    basename: i18n/messages
  profiles:
    active: test
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 20MB
  devtools:
    restart:
      enabled: false
  datasource:
    # 基本连接池配置
    initialSize: 5
    minIdle: 5
    maxActive: 20
    maxWait: 60000
    
    # 连接检测配置
    timeBetweenEvictionRunsMillis: 60000
    minEvictableIdleTimeMillis: 300000
    maxEvictableIdleTimeMillis: 900000
    
    # 连接验证配置
    validationQuery: SELECT 1
    testWhileIdle: true
    testOnBorrow: true
    testOnReturn: false
    
    # 连接超时配置
    connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000;druid.stat.logSlowSql=true;druid.connectionTimeout=30000;druid.validationQueryTimeout=10000
    
    # 连接池监控
    webStatFilter:
      enabled: true
    statViewServlet:
      enabled: true
      allow: null
      url-pattern: /druid/*
      login-username: ruoyi
      login-password: 123456
    filter:
      stat:
        enabled: true
        log-slow-sql: true
        slow-sql-millis: 1000
        merge-sql: true
      wall:
        config:
          multi-statement-allow: true

  freemarker:
    template-loader-path: classpath:/templates/
    suffix: .ftl
    cache: false
    charset: UTF-8
    check-template-location: true
    content-type: text/html
    expose-request-attributes: false
    expose-session-attributes: false
    request-context-attribute: request
    expose-spring-macro-helpers: true
  redis:
    host: localhost
    port: 6379
    database: 0
    password: 
    timeout: 10s
    # 简化连接池配置，避免复杂的pool配置
    # lettuce:
    #   pool:
    #     min-idle: 0
    #     max-idle: 8
    #     max-active: 8
    #     max-wait: -1ms
mybatis:
  typeAliasesPackage: cc.carce.sale.entity
  mapperLocations: classpath*:mapper/**/*Mapper.xml
  configLocation: classpath:mybatis/mybatis-config.xml

# PageHelper分页配置
pagehelper:
  helper-dialect: mysql
  reasonable: true
  support-methods-arguments: true
  params: count=countSql
  page-size-zero: true

# Swagger配置
springfox:
  documentation:
    swagger-ui:
      enabled: true
    enabled: true

# Sa-Token配置
sa-token:
  # token名称 (同时也是cookie名称)
  token-name: satoken
  # token有效期，单位s 默认30天, -1代表永不过期 
  timeout: 2592000
  # token临时有效期 (指定时间内无操作就视为token过期) 单位: 秒
  active-timeout: -1
  # 是否允许同一账号并发登录 (为true时允许一起登录, 为false时新登录挤掉旧登录) 
  is-concurrent: true
  # 在多人登录同一账号时，是否共用一个token (为true时所有登录共用一个token, 为false时每次登录新建一个token) 
  is-share: false
  # token风格
  token-style: uuid
  # 是否输出操作日志 
  is-log: false
  # 配置Sa-Token使用Redis存储
  token-prefix: 'satoken:'
  # 配置Sa-Token使用Redis存储
  is-read-cookie: false
  is-read-header: true
  is-read-body: false
  # 配置Sa-Token使用Redis存储
  is-read-session: false
  # 配置Sa-Token使用Redis存储
  is-write-session: false
  # 配置Sa-Token使用Redis存储
  is-read-request: false
  # 配置Sa-Token使用Redis存储
  is-write-request: false


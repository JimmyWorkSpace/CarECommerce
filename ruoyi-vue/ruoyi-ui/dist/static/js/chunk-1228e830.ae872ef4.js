(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1228e830"],{"0b97":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"100px"}},[a("el-row",[a("el-form-item",{attrs:{label:"选择年份",prop:"companyIds"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParams.year,callback:function(t){e.$set(e.queryParams,"year",t)},expression:"queryParams.year"}},e._l(e.years,(function(e,t){return a("el-option",{key:t,attrs:{label:e.year+"年",value:e.year}})})),1)],1),a("el-form-item",{attrs:{label:"选择企业",prop:"companyIds"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.companySelectedType,callback:function(t){e.companySelectedType=t},expression:"companySelectedType"}},e._l(e.companySearchOptions.fixedGroup,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"other"==e.companySelectedType,expression:"companySelectedType=='other'"}],staticStyle:{"margin-left":"20px"},attrs:{clearable:"","collapse-tags":"",multiple:"",placeholder:"请选择"},model:{value:e.queryParams.companyIds,callback:function(t){e.$set(e.queryParams,"companyIds",t)},expression:"queryParams.companyIds"}},e._l(e.companySearchOptions.companyList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.shortName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"散点大小",prop:"symbolSize"}},[a("el-input-number",{attrs:{min:2,max:20},model:{value:e.chartConfig.symbolSize,callback:function(t){e.$set(e.chartConfig,"symbolSize",t)},expression:"chartConfig.symbolSize"}})],1),a("el-form-item",{attrs:{label:"散点颜色",prop:"symbolSize"}},[a("div",{staticClass:"color-item"},[a("el-checkbox",{staticStyle:{"margin-right":"10px"},model:{value:e.chartConfig.randomColor,callback:function(t){e.$set(e.chartConfig,"randomColor",t)},expression:"chartConfig.randomColor"}},[e._v("随机颜色")]),a("el-color-picker",{attrs:{disabled:e.chartConfig.randomColor,predefine:e.predefineColors},model:{value:e.chartConfig.color,callback:function(t){e.$set(e.chartConfig,"color",t)},expression:"chartConfig.color"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")])],1),a("el-form-item",[a("em",{staticStyle:{color:"red"}},[e._v("提示：点击散点可删除该项。")])])],1)],1),a("div",{attrs:{id:"sandianChart"}})],1)},n=[],o=a("c14f"),c=a("1da1"),i=(a("99af"),a("4de4"),a("a434"),a("d3b7"),a("0643"),a("2382"),a("a6fc")),l=a("313e"),s={name:"CompanyReportSandianData",components:{},data:function(){return{queryParams:{companyIds:[],year:2020},predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgb(255, 69, 0)","rgb(255, 120, 0)","hsv(51, 100, 98)"],years:[],companySelectedType:"slyt",companySearchOptions:{},sandianData:[],chart:{},chartConfig:{symbolSize:15,color:"#00CED1",randomColor:!1}}},created:function(){var e=this;return Object(c["a"])(Object(o["a"])().m((function t(){var a,r,n;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:return a=e,t.n=1,i["m"](!1);case 1:return r=t.v,a.years=r.data,a.queryParams.year=r.data[0]["year"],t.n=2,i["f"]();case 2:n=t.v,n.data.fixedGroup.push({name:"手动选择",value:"other"}),a.companySearchOptions=n.data,a.queryParams.companyIds=a.companySearchOptions.fixedGroup.filter((function(e){return e.value==a.companySelectedType}))[0]["companyIds"],setTimeout((function(){var e=document.getElementById("sandianChart");a.chart=l["init"](e),a.handleQuery()}));case 3:return t.a(2)}}),t)})))()},watch:{companySelectedType:function(){var e=this;"other"!=e.companySelectedType&&(e.queryParams.companyIds=e.companySearchOptions.fixedGroup.filter((function(t){return t.value==e.companySelectedType}))[0]["companyIds"],console.log("query params company ids change",e.queryParams.companyIds))}},methods:{getCompanySearchOptions:function(){var e=this;i["f"]().then((function(t){e.companySearchOptions=t.data,e.queryParams.companyIds=e.companySearchOptions.fixedGroup.filter((function(t){return t.value==e.companySelectType}))[0]["companyIds"]}))},handleQuery:function(){var e=this;i["l"](this.queryParams).then((function(t){e.sandianData=t.data,e.initChart()}))},randomColor:function(){var e=Math.floor(200*Math.random()),t=Math.floor(200*Math.random()),a=Math.floor(200*Math.random());return"rgb(".concat(e,",").concat(t,",").concat(a,")")},initChart:function(){var e=this,t=this,a={xAxis:{},yAxis:{},title:{text:"".concat(this.queryParams.year,"年改制企业经营发展散点图"),left:"center"},toolbox:{feature:{saveAsImage:{}}},series:[{symbolSize:t.chartConfig.symbolSize,data:this.sandianData,type:"scatter",itemStyle:{normal:{shadowBlur:10,shadowColor:"rgba(120, 36, 50, 0.5)",shadowOffsetY:5,color:function(e){return t.chartConfig.randomColor?t.predefineColors[Math.floor(Math.random()*t.predefineColors.length-1)]:t.chartConfig.color}}},label:{show:!0,formatter:"{@[2]}",position:"top"}}]};this.chart.setOption(a,!0),this.chart.on("click",(function(a){var r=a.value[3],n=e.queryParams.companyIds.indexOf(r);-1!=n&&(t.queryParams.companyIds.splice(n,1),t.companySelectedType="other",t.handleQuery())}))},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()}}},u=s,p=(a("d167"),a("2877")),d=Object(p["a"])(u,r,n,!1,null,"51416d59",null);t["default"]=d.exports},"0d79":function(e,t,a){},"8a79":function(e,t,a){"use strict";var r=a("23e7"),n=a("e330"),o=a("06cf").f,c=a("50c4"),i=a("577e"),l=a("5a34"),s=a("1d80"),u=a("ab13"),p=a("c430"),d=n("".endsWith),m=n("".slice),f=Math.min,y=u("endsWith"),h=!p&&!y&&!!function(){var e=o(String.prototype,"endsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!h&&!y},{endsWith:function(e){var t=i(s(this));l(e);var a=arguments.length>1?arguments[1]:void 0,r=t.length,n=void 0===a?r:f(c(a),r),o=i(e);return d?d(t,o,n):m(t,n-o.length,n)===o}})},a6fc:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"j",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"m",(function(){return i})),a.d(t,"i",(function(){return l})),a.d(t,"g",(function(){return s})),a.d(t,"l",(function(){return u})),a.d(t,"e",(function(){return p})),a.d(t,"c",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"k",(function(){return f})),a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return h}));a("8a79");var r=a("b775");function n(){return Object(r["a"])({url:"/api/report/getCompanySearchOptions",method:"get"})}function o(e){return Object(r["a"])({url:"/api/report/getLastestYearData",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/report/getCompanyReportData",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/api/report/getValidYears",method:"get",params:{includeMiddleYear:e}})}function l(e){return Object(r["a"])({url:"/api/report/getDetailLineChart",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/api/report/getDataLineChart",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/api/report/sandian",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/api/report/getCompanyReportDataWithInc",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/api/report/getCompanyDetailDataWithInc",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/api/report/getDetailDataByCompany",method:"get",params:{companyId:e}})}function f(e){return Object(r["a"])({url:"/api/report/getReportDataByCompany",method:"get",params:{companyId:e}})}function y(){return Object(r["a"])({url:"/api/report/colors",method:"get"})}function h(e,t){var a=e.row,r=e.column;if(r&&r.property){a[r.property],a[r.property+"2"];var n=a[r.property+"Inc"];r.property.endsWith("Inc")&&(n=a[r.property]);var o="font-weight: bold;color: #ffffff";if(null!=n){var c=null;for(var i in t){var l=t[i];if(1==l.type&&n>l.level||2==l.type&&n<l.level){c=l.color;break}}for(var s in t){var u=t[s];if(0==u.type&&u.level==n){c=u.color;break}}return null!=c?"background-color: ".concat(c,";")+o:""}}}},d167:function(e,t,a){"use strict";a("0d79")}}]);
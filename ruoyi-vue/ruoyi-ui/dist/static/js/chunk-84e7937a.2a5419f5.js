(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84e7937a"],{"04d1":function(e,t,r){var i=r("342f"),n=i.match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},"4e82":function(e,t,r){"use strict";var i=r("23e7"),n=r("e330"),a=r("59ed"),s=r("7b0b"),o=r("07fa"),l=r("577e"),d=r("d039"),c=r("addb"),u=r("a640"),m=r("04d1"),h=r("d998"),f=r("2d00"),p=r("512ce"),v=[],g=n(v.sort),b=n(v.push),w=d((function(){v.sort(void 0)})),y=d((function(){v.sort(null)})),k=u("sort"),_=!d((function(){if(f)return f<70;if(!(m&&m>3)){if(h)return!0;if(p)return p<603;var e,t,r,i,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(i=0;i<47;i++)v.push({k:t+i,v:r})}for(v.sort((function(e,t){return t.v-e.v})),i=0;i<v.length;i++)t=v[i].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}})),x=w||!y||!k||!_,L=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:l(t)>l(r)?1:-1}};i({target:"Array",proto:!0,forced:x},{sort:function(e){void 0!==e&&a(e);var t=s(this);if(_)return void 0===e?g(t):g(t,e);var r,i,n=[],l=o(t);for(i=0;i<l;i++)i in t&&b(n,t[i]);c(n,L(e)),r=n.length,i=0;while(i<r)t[i]=n[i++];while(i<l)delete t[i++];return t}})},"512ce":function(e,t,r){var i=r("342f"),n=i.match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},addb:function(e,t,r){var i=r("f36a"),n=Math.floor,a=function(e,t){var r=e.length,l=n(r/2);return r<8?s(e,t):o(e,a(i(e,0,l),t),a(i(e,l),t),t)},s=function(e,t){var r,i,n=e.length,a=1;while(a<n){i=a,r=e[a];while(i&&t(e[i-1],r)>0)e[i]=e[--i];i!==a++&&(e[i]=r)}return e},o=function(e,t,r,i){var n=t.length,a=r.length,s=0,o=0;while(s<n||o<a)e[s+o]=s<n&&o<a?i(t[s],r[o])<=0?t[s++]:r[o++]:s<n?t[s++]:r[o++];return e};e.exports=a},b96f:function(e,t,r){},c9e0:function(e,t,r){"use strict";r("b96f")},d998:function(e,t,r){var i=r("342f");e.exports=/MSIE|Trident/.test(i)},db11:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",staticStyle:{display:"none"},attrs:{model:e.queryParams,size:"small",inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"跳轉地址",prop:"linkUrl"}},[r("el-input",{attrs:{placeholder:"請輸入跳轉地址",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.linkUrl,callback:function(t){e.$set(e.queryParams,"linkUrl",t)},expression:"queryParams.linkUrl"}})],1),r("el-form-item",{attrs:{label:"是否跳轉",prop:"isLink"}},[r("el-select",{attrs:{placeholder:"請選擇是否跳轉",clearable:""},model:{value:e.queryParams.isLink,callback:function(t){e.$set(e.queryParams,"isLink",t)},expression:"queryParams.isLink"}},e._l(e.dict.type.sys_yes_no_num,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜尋")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["car:advertisement:add"],expression:"['car:advertisement:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["car:advertisement:edit"],expression:"['car:advertisement:edit']"}],attrs:{type:"info",plain:"",icon:"el-icon-arrow-up",size:"mini",disabled:e.single},on:{click:e.handleMoveUp}},[e._v("上移")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["car:advertisement:edit"],expression:"['car:advertisement:edit']"}],attrs:{type:"info",plain:"",icon:"el-icon-arrow-down",size:"mini",disabled:e.single},on:{click:e.handleMoveDown}},[e._v("下移")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["car:advertisement:edit"],expression:"['car:advertisement:edit']"}],attrs:{type:"info",plain:"",icon:"el-icon-sort",size:"mini"},on:{click:e.handleSaveOrder}},[e._v("儲存排序")])],1),r("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.advertisementList,"row-key":"id","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{label:"圖片",align:"center",prop:"imageUrl",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"100px",height:"60px"},attrs:{src:e.row.imageUrl,fit:"cover","preview-src-list":[e.row.imageUrl]}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])]}}])}),r("el-table-column",{attrs:{label:"標題",align:"center",prop:"title",width:"150","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"是否跳轉",align:"center",prop:"isLink",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("dict-tag",{attrs:{options:e.dict.type.sys_yes_no_num,value:t.row.isLink}})]}}])}),r("el-table-column",{attrs:{label:"跳轉地址",align:"center",prop:"linkUrl","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"排序",align:"center",prop:"showOrder",width:"80"}}),r("el-table-column",{attrs:{label:"建立時間",align:"center",prop:"createTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.parseTime(t.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["car:advertisement:edit"],expression:"['car:advertisement:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["car:advertisement:remove"],expression:"['car:advertisement:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("刪除")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"圖片地址",prop:"imageUrl"}},[r("el-input",{attrs:{placeholder:"請輸入圖片地址"},model:{value:e.form.imageUrl,callback:function(t){e.$set(e.form,"imageUrl",t)},expression:"form.imageUrl"}}),r("el-upload",{staticClass:"upload-demo",staticStyle:{"margin-top":"10px"},attrs:{action:e.uploadUrl,headers:e.uploadHeaders,"on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"before-upload":e.beforeUpload,"show-file-list":!1}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("點擊上傳")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上傳jpg/png/gif檔案，且不超過2MB")])],1)],1),r("el-form-item",{attrs:{label:"標題",prop:"title"}},[r("el-input",{attrs:{placeholder:"請輸入標題"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"是否跳轉",prop:"isLink"}},[r("el-radio-group",{on:{change:e.handleIsLinkChange},model:{value:e.form.isLink,callback:function(t){e.$set(e.form,"isLink",t)},expression:"form.isLink"}},e._l(e.dict.type.sys_yes_no_num,(function(t){return r("el-radio",{key:parseInt(t.value),attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),1===e.form.isLink?r("el-form-item",{attrs:{label:"跳轉地址",prop:"linkUrl"}},[r("el-input",{attrs:{placeholder:"請輸入跳轉地址"},model:{value:e.form.linkUrl,callback:function(t){e.$set(e.form,"linkUrl",t)},expression:"form.linkUrl"}})],1):e._e(),0===e.form.isLink?r("el-form-item",{attrs:{label:"顯示內容",prop:"content"}},[r("editor",{attrs:{"min-height":192},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1):e._e(),r("el-form-item",{attrs:{label:"是否刪除",prop:"delFlag"}},[r("el-radio-group",{model:{value:e.form.delFlag,callback:function(t){e.$set(e.form,"delFlag",t)},expression:"form.delFlag"}},e._l(e.dict.type.sys_yes_no_num,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("確 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],a=r("5530"),s=(r("7db0"),r("c740"),r("d81d"),r("4e82"),r("d3b7"),r("0643"),r("fffc"),r("a573"),r("b775"));function o(e){return Object(s["a"])({url:"/car/advertisement/list",method:"get",params:e})}function l(e){return Object(s["a"])({url:"/car/advertisement/"+e,method:"get"})}function d(e){return Object(s["a"])({url:"/car/advertisement",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/car/advertisement",method:"put",data:e})}function u(e){return Object(s["a"])({url:"/car/advertisement/"+e,method:"delete"})}function m(e){return Object(s["a"])({url:"/car/advertisement/order",method:"put",data:e})}var h=r("095c"),f={name:"Advertisement",dicts:["sys_yes_no_num"],components:{Editor:h["a"]},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,advertisementList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,linkUrl:null,isLink:null},form:{},rules:{imageUrl:[{required:!0,message:"圖片地址不能為空",trigger:"blur"}],title:[{required:!0,message:"標題不能為空",trigger:"blur"}]},uploadUrl:"/api-prod/car/advertisement/upload",uploadHeaders:{Authorization:"Bearer "+this.$store.getters.token},orderChanged:!1,originalOrder:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,o(this.queryParams).then((function(t){e.advertisementList=t.rows,e.total=t.total,e.loading=!1,e.originalOrder=e.advertisementList.map((function(e){return{id:e.id,showOrder:e.showOrder}}))}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,imageUrl:null,linkUrl:null,isLink:0,content:null,title:null,delFlag:0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加廣告"},handleUpdate:function(e){var t=this;this.reset();var r=e.id||this.ids;l(r).then((function(e){t.form=e.data,t.open=!0,t.title="修改廣告"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.id?c(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()})):d(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$modal.confirm('是否確認刪除廣告編號為"'+r+'"的數據項？').then((function(){return u(r)})).then((function(){t.getList(),t.$modal.msgSuccess("刪除成功")})).catch((function(){}))},handleExport:function(){this.download("car/advertisement/export",Object(a["a"])({},this.queryParams),"advertisement_".concat((new Date).getTime(),".xlsx"))},handleMoveUp:function(){if(1===this.ids.length){var e=this.ids[0],t=this.advertisementList.findIndex((function(t){return t.id===e}));if(t<=0)this.$modal.msgWarning("已經是第一條記錄，無法上移");else{var r=this.advertisementList[t],i=this.advertisementList[t-1],n=r.showOrder;r.showOrder=i.showOrder,i.showOrder=n,this.advertisementList.sort((function(e,t){return e.showOrder-t.showOrder})),this.orderChanged=!0}}else this.$modal.msgWarning("請選擇一條記錄進行上移操作")},handleMoveDown:function(){if(1===this.ids.length){var e=this.ids[0],t=this.advertisementList.findIndex((function(t){return t.id===e}));if(t>=this.advertisementList.length-1)this.$modal.msgWarning("已經是最後一條記錄，無法下移");else{var r=this.advertisementList[t],i=this.advertisementList[t+1],n=r.showOrder;r.showOrder=i.showOrder,i.showOrder=n,this.advertisementList.sort((function(e,t){return e.showOrder-t.showOrder})),this.orderChanged=!0}}else this.$modal.msgWarning("請選擇一條記錄進行下移操作")},handleSaveOrder:function(){var e=this;m(this.advertisementList).then((function(t){e.$modal.msgSuccess("排序儲存成功"),e.orderChanged=!1,e.getList()}))},tableRowClassName:function(e){var t=e.row;e.rowIndex;if(this.orderChanged){var r=this.originalOrder.find((function(e){return e.id===t.id}));if(r&&r.showOrder!==t.showOrder)return"order-changed-row"}return""},handleUploadSuccess:function(e,t,r){200===e.code?(this.form.imageUrl=e.data,this.$modal.msgSuccess("上傳成功")):this.$modal.msgError(e.msg||"上傳失敗")},handleUploadError:function(e,t,r){this.$modal.msgError("上傳失敗")},beforeUpload:function(e){var t=-1!==e.type.indexOf("image"),r=e.size/1024/1024<2;return t?!!r||(this.$message.error("上傳圖片大小不能超過 2MB!"),!1):(this.$message.error("上傳檔案只能是圖片格式!"),!1)},handleIsLinkChange:function(e){1===e?this.form.content=null:this.form.linkUrl=null}}},p=f,v=(r("c9e0"),r("2877")),g=Object(v["a"])(p,i,n,!1,null,"54507c50",null);t["default"]=g.exports}}]);
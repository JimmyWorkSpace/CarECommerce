<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.car.mapper.master.CarBannerMapper">
    
    <resultMap type="com.ruoyi.car.domain.CarBannerEntity" id="CarBannerResult">
        <id     property="id"           column="id"           />
        <result property="imageUrl"      column="imageUrl"    />
        <result property="linkUrl"       column="linkUrl"     />
        <result property="isLink"        column="isLink"      />
        <result property="showOrder"     column="showOrder"   />
        <result property="delFlag"       column="delFlag"     />
        <result property="createTime"    column="createTime"  />
    </resultMap>
    
    <sql id="selectCarBannerVo">
        select id, imageUrl, linkUrl, isLink, showOrder, delFlag, createTime 
        from car_banner
    </sql>
    
    <select id="selectAllOrderByShowOrder" resultMap="CarBannerResult">
        <include refid="selectCarBannerVo"/>
        where delFlag = 0 or delFlag is null
        order by showOrder asc, createTime desc
    </select>
    
    <update id="batchUpdateShowOrder" parameterType="java.util.List">
            update car_banner 
            set showOrder = 
            case id 
        <foreach collection="banners" item="banner">
            when #{banner.id} then #{banner.showOrder}
        </foreach>
        	end
    </update>
    
</mapper> 
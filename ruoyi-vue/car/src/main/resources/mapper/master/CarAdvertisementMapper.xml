<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.car.mapper.master.CarAdvertisementMapper">
    
    <resultMap type="com.ruoyi.car.domain.CarAdvertisementEntity" id="CarAdvertisementResult">
        <id     property="id"           column="id"           />
        <result property="imageUrl"      column="imageUrl"    />
        <result property="linkUrl"       column="linkUrl"     />
        <result property="isLink"        column="isLink"      />
        <result property="content"       column="content"     />
        <result property="title"         column="title"       />
        <result property="showOrder"     column="showOrder"   />
        <result property="delFlag"       column="delFlag"     />
        <result property="createTime"    column="createTime"  />
    </resultMap>
    
    <sql id="selectCarAdvertisementVo">
        select id, imageUrl, linkUrl, isLink, content, title, showOrder, delFlag, createTime 
        from car_advertisement
    </sql>
    
    <select id="selectAllOrderByShowOrder" resultMap="CarAdvertisementResult">
        <include refid="selectCarAdvertisementVo"/>
        where delFlag = 0 or delFlag is null
        order by showOrder asc, createTime desc
    </select>
    
    <update id="batchUpdateShowOrder" parameterType="java.util.List">
            update car_advertisement 
            set showOrder = 
            case id 
        <foreach collection="advertisements" item="advertisement">
            when #{advertisement.id} then #{advertisement.showOrder}
        </foreach>
        	end
    </update>
    
</mapper> 